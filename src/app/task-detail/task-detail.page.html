<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button (click)="goBack()"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalles de la Tarea</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="navigateToEdit()">
        <ion-icon name="create" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card *ngIf="task">
    <ion-card-header>
      <ion-card-title>{{ task.title }}</ion-card-title>
      <ion-card-subtitle>
        <ion-badge [color]="task.completed ? 'success' : 'warning'">
          {{ task.completed ? 'Completada' : 'Pendiente' }}
        </ion-badge>
      </ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <p>{{ task.description }}</p>
      
      <ion-item lines="none">
        <ion-icon name="calendar" slot="start"></ion-icon>
        <ion-label>
          <h3>Fecha de creación</h3>
          <p>{{ task.createdAt | date:'medium' }}</p>
        </ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-icon name="refresh" slot="start"></ion-icon>
        <ion-label>
          <h3>Última actualización</h3>
          <p>{{ task.updatedAt | date:'medium' }}</p>
        </ion-label>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <ion-button 
    expand="block" 
    fill="outline" 
    [color]="task?.completed ? 'warning' : 'success'"
    (click)="toggleTaskStatus()"
    class="ion-margin">
    <ion-icon 
      [name]="task?.completed ? 'checkbox' : 'square-outline'" 
      slot="start">
    </ion-icon>
    {{ task?.completed ? 'Marcar como pendiente' : 'Marcar como completada' }}
  </ion-button>

  <ion-button 
    expand="block" 
    color="danger" 
    fill="outline"
    (click)="deleteTask()"
    class="ion-margin">
    <ion-icon name="trash" slot="start"></ion-icon>
    Eliminar tarea
  </ion-button>
</ion-content>